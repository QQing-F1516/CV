<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>轮播图测试</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .test-container { max-width: 1200px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px; }
        .carousel-section { display: flex; gap: 30px; margin: 40px 0; }
        .carousel-container { flex: 1; max-width: 48%; }
        .carousel-container h3 { text-align: center; margin-bottom: 20px; color: #4a6cf7; }
        .carousel { height: 300px; position: relative; background: #f8f9fa; border-radius: 10px; overflow: hidden; }
        .carousel-inner { position: relative; width: 100%; height: 100%; }
        .carousel-item { position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; transition: opacity 0.6s ease; }
        .carousel-item.active { opacity: 1; }
        .carousel-item img { width: 100%; height: 100%; object-fit: cover; border-radius: 10px; }
        .carousel-btn { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(255,255,255,0.8); border: none; width: 35px; height: 35px; border-radius: 50%; cursor: pointer; z-index: 10; }
        .carousel-btn.prev { left: 10px; }
        .carousel-btn.next { right: 10px; }
        .carousel-indicators { position: absolute; bottom: 15px; left: 50%; transform: translateX(-50%); display: flex; gap: 8px; z-index: 10; }
        .indicator { width: 10px; height: 10px; border-radius: 50%; background: rgba(255,255,255,0.6); cursor: pointer; }
        .indicator.active { background: white; transform: scale(1.2); }
        .carousel-caption { position: absolute; bottom: 0; left: 0; width: 100%; padding: 15px; background: linear-gradient(transparent, rgba(0,0,0,0.8)); color: white; text-align: center; }
        .debug { background: #f0f0f0; padding: 15px; margin: 20px 0; border-radius: 5px; font-family: monospace; font-size: 12px; max-height: 200px; overflow-y: auto; }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>轮播图功能测试</h1>
        <div class="debug" id="debug">调试信息:<br></div>
        
        <div class="carousel-section">
            <div class="carousel-container">
                <h3>学生组织活动照片</h3>
                <div class="carousel">
                    <div class="carousel-inner" id="carousel1">
                        <div class="carousel-item active">
                            <img src="./img/合照.jpg" alt="图片1">
                            <div class="carousel-caption">校园吃货节活动现场</div>
                        </div>
                        <div class="carousel-item">
                            <img src="./img/1.jpg" alt="图片2">
                            <div class="carousel-caption">跳蚤市场组织工作</div>
                        </div>
                        <div class="carousel-item">
                            <img src="./img/2.jpg" alt="图片3">
                            <div class="carousel-caption">学生会团队合影</div>
                        </div>
                    </div>
                    <button class="carousel-btn prev" onclick="prevSlide('carousel1')">‹</button>
                    <button class="carousel-btn next" onclick="nextSlide('carousel1')">›</button>
                    <div class="carousel-indicators">
                        <span class="indicator active" onclick="currentSlide('carousel1', 1)"></span>
                        <span class="indicator" onclick="currentSlide('carousel1', 2)"></span>
                        <span class="indicator" onclick="currentSlide('carousel1', 3)"></span>
                    </div>
                </div>
            </div>

            <div class="carousel-container">
                <h3>茶艺社活动照片</h3>
                <div class="carousel">
                    <div class="carousel-inner" id="carousel2">
                        <div class="carousel-item active">
                            <img src="img/照1.jpg" alt="图片1">
                            <div class="carousel-caption">毕业茶会活动</div>
                        </div>
                        <div class="carousel-item">
                            <img src="img/照2.jpg" alt="图片2">
                            <div class="carousel-caption">茶韵沁心主题茶会</div>
                        </div>
                        <div class="carousel-item">
                            <img src="img/照3.jpg" alt="图片3">
                            <div class="carousel-caption">茶艺教学活动</div>
                        </div>
                        <div class="carousel-item">
                            <img src="img/海边.jpg" alt="图片4">
                            <div class="carousel-caption">校外茶馆学习</div>
                        </div>
                    </div>
                    <button class="carousel-btn prev" onclick="prevSlide('carousel2')">‹</button>
                    <button class="carousel-btn next" onclick="nextSlide('carousel2')">›</button>
                    <div class="carousel-indicators">
                        <span class="indicator active" onclick="currentSlide('carousel2', 1)"></span>
                        <span class="indicator" onclick="currentSlide('carousel2', 2)"></span>
                        <span class="indicator" onclick="currentSlide('carousel2', 3)"></span>
                        <span class="indicator" onclick="currentSlide('carousel2', 4)"></span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function log(msg) {
            console.log(msg);
            document.getElementById('debug').innerHTML += new Date().toLocaleTimeString() + ': ' + msg + '<br>';
        }

        let carousels = {};

        window.nextSlide = function(id) {
            log('nextSlide: ' + id);
            if (!carousels[id]) return;
            carousels[id].current = (carousels[id].current + 1) % carousels[id].total;
            update(id);
        };

        window.prevSlide = function(id) {
            log('prevSlide: ' + id);
            if (!carousels[id]) return;
            carousels[id].current = (carousels[id].current - 1 + carousels[id].total) % carousels[id].total;
            update(id);
        };

        window.currentSlide = function(id, index) {
            log('currentSlide: ' + id + ', index: ' + index);
            if (!carousels[id]) return;
            carousels[id].current = index - 1;
            update(id);
        };

        function update(id) {
            const carousel = carousels[id];
            const element = document.getElementById(id);
            if (!element || !carousel) return;

            const slides = element.querySelectorAll('.carousel-item');
            const indicators = element.closest('.carousel-container').querySelectorAll('.indicator');

            slides.forEach((slide, i) => slide.classList.toggle('active', i === carousel.current));
            indicators.forEach((ind, i) => ind.classList.toggle('active', i === carousel.current));

            log('轮播图 ' + id + ' 显示第 ' + (carousel.current + 1) + ' 张');
        }

        function init(id) {
            log('初始化: ' + id);
            const element = document.getElementById(id);
            if (!element) {
                log('找不到元素: ' + id);
                return;
            }

            const slides = element.querySelectorAll('.carousel-item');
            carousels[id] = { current: 0, total: slides.length };
            
            log('轮播图 ' + id + ' 有 ' + slides.length + ' 张图片');
            update(id);

            // 自动播放
            setInterval(() => window.nextSlide(id), 4000);
        }

        document.addEventListener('DOMContentLoaded', function() {
            log('DOM加载完成');
            setTimeout(() => {
                init('carousel1');
                init('carousel2');
            }, 100);
        });
    </script>
</body>
</html>
